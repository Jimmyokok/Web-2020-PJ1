<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport"content="width=device-width,initial-scale=1.0,maximum-scale=1,user-scalable=no">
        <link rel="stylesheet" href="./css/reset.css" media="all">
        <link rel="stylesheet" href="./css/header.css" media="all">
        <link rel="stylesheet" href="./css/style-upload.css" media="all">
        <link rel="stylesheet" href="./css/footer.css" media="all">
        <script src="jquery-3.4.1.min.js"></script>
        <title>Upload</title>
        <script>
            $(document).ready(function(){
                $(".file").on("change",function(e){
                    var fileread = new FileReader();
                    var filename = $(this).get(0).files[0];
                    var filetype = /jpeg|png|gif|bmp/ig;
                    var ext = filename.type.split("/")[1];
                    var name=e.currentTarget.files[0].name
                    if(filetype.test(ext)){
                        $(".button span:nth-child(2)").text("Reupload");
                        $(".uploadimg").attr("src","");
                        fileread.readAsDataURL(filename);
                        fileread.onload=function(){
                            $(".path").text(name);
                            $(".uploadimg").attr("src",this.result);
                        }
                    }
                    else{
                        alert("图片格式不正确，请重新上传！");
                    }
                });
            });
        </script>
    </head>
    <body>
        <header>
            <nav>
                <a href="./home.html">
                    <img src="../img/logo.jpg">
                </a>
                <a href="./home.html">Home</a>
                <a href="./browse.html">Browse</a>
                <a href="./search.html">Search</a>
            </nav>
            <div class="myaccount">
                <a href="" class="dropdown">
                    <p>My account<img src="../img/myaccount.png"></p>
                </a>
                <div class="dropdown-content">
                    <a href="./upload.html"><img src="../img/upload.png">Upload</a>
                    <a href="./myphoto.html"><img src="../img/pic.png">My Photo</a>
                    <a href="./favor.html"><img src="../img/favor.png">Favourite</a>
                    <a href="../index.html"><img src="../img/login.png">Login</a>
                </div>
            </div>
        </header>
        <div class="upload">
            <p class="main">Upload</p>
            <form action="./myphoto.html" method="GET">
                <img class="uploadimg" src="">
                <div class="imgpath"><p class="path">No image here</p></div>
                <div class="button">
                    <input class="file" type="file" name="file">
                    <span>Upload</span>
                </div>
                <div class="text">
                    <p class="title">Title:</p>
                    <input class="textinput" type="text" name="title">
                </div>
                <div class="text">
                    <p class="title">Description:</p>
                    <textarea class="descinput" name="desc"></textarea>
                </div>
                <div class="text">
                    <p class="title">Country:</p>
                    <input class="textinput" type="text" name="country">
                </div>
                <div class="text">
                    <p class="title">City:</p>
                    <input class="textinput" type="text" name="city">
                </div>
                <button class="button" type="submit" onclick="alert('已上传')"><span>Submit</span></button>
            </form>
        </div>
        <footer>
            <div class="about">
                <a href="#">使用条款</a>
                <a href="#">隐私政策</a>
                <a href="#">关于</a>
                <a href="#">联系我们</a>
            </div>
            <div class="copyright">
                <p>Copyright © 2019-2021 Web Fundamental All Rights Reserved. 备案号：沪FDUCS备017-1号</p>
            </div>
        </footer>
    </body>
</html>